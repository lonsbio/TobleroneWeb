<head>
<script>
(async () => {
  if (location.protocol === 'https:' && 'serviceWorker' in navigator && !crossOriginIsolated) {
    // Register with the correct scope. On GitHub Pages (user/REPO), sw must be under that base path.
    const base = document.currentScript?.src ? new URL('.', document.currentScript.src).pathname
               : (document.baseURI ? new URL(document.baseURI).pathname : location.pathname);
    const swURL = base.replace(/\/?$/, '/') + 'coi-serviceworker.js';
    const scope = "/TobleroneWeb/"; // same as Vite base
    
    try { await nnavigator.serviceWorker.register(scope + "coi-serviceworker.js", { scope });} catch (e) {}
    // Wait until isolated (or timeout) before proceeding
    for (let i = 0; i < 50 && !crossOriginIsolated; i++) await new Promise(r => setTimeout(r, 100));
    if (!crossOriginIsolated) console.warn('Not isolated yet; threads will fail.');
  }
  })();
  // Now load your Emscripten moduleâ€¦

</script>

</head>


<body>
  
<h1>WebAssembly and Toblerone Example</h1>

Use an Biowasm compatible Aioli object and create a CLI instance to process tinyt commands, including  results for Ikaros

  
<h4>Output of <code>tinyt --help</code>:</h4>
<pre id="outputhelp">Loading...</pre>
  
<h4>Output of <code>tinyt --version</code>:</h4>
<pre id="output">Loading...</pre>

<h4>Output of <code>tinyt --help</code>:</h4>
<pre id="output_help">Loading...</pre>
<script type="module" src="main.js"></script>

</body>
